# 实例分析说明

## 第一例概述：CPU出现持续飙升，甚至导致系统崩溃，内存无异常

### 场景再现：

一个并发活动，并发量大于1万，突然出现了问题，页面半天打不开，打开了半天下不了单，cpu涨了又跌跌了又涨，领导发飙，运营骂娘。于是技术团队开始定位bug，看了好几圈都没有发现问题，重启也没有解决问题....



### 分析问题，提出假设和疑问

为什么单独CPU消耗这么大？为什么还有波动？

#### 猜测和假设出CPU暴涨的原因：

1. 某段代码逻辑计算密度过大
2. GC压力过大？（小对象太多？）
3. 依赖接口请求延迟，导致在高并发环境下请求积压越来越多？

有了初步的分析和假设，下一步我们来一起定位问题

### 定位问题，使用趁手的工具

#### 用`pprof`工具定位

很多小伙伴担心线上使用`pprof`会影响性能，担心安全问题。这个在我看来利大于弊，当服务出现问题的时候，资源占用多一点点与能够解决问题相比微不足道，当服务没有问题的时候使用`pprof`那更没有问题了