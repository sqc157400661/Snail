### 课程大纲

1. 从字符串生成字节切片
2. 获取字符串的某一部分
3. 字符串和切片的内存结构
4. 修改字符串中的某个字符
5. append 函数常见操作

### 上一课作业答案解析

无

### 本次课堂内容

#### 1、从字符串生成字节切片

假设 s 是一个**字符串**（本质上是一个**字节数组**），那么就可以直接通过 `c := []byte(s)`来获取一个字节的切片 c。也可通过 copy 函数来达到相同的目的：`copy(dst []byte, src string)`。

注意

- 如果有中文 可使用`r := []rune(s)` 或者`c := []int32(s)`
- 可以通过代码 `len([]int32(s))` 来获得字符串中字符的数量,使用 `utf8.RuneCountInString(s)` 效率会更高一点

将一个字符串追加到某一个字符数组的尾部

```
var b []byte
var s string
b = append(b, s...)
```

#### 2、获取字符串的某一部分

- 使用 `substr := str[start:end]` 可以从字符串 str 获取到从索引 start 开始到 end-1 位置的子字符串。
- `str[start:]` 表示获取从 start 开始到 len(str)-1 位置的子字符串。
- `str[:end]` 表示获取从 0 开始到 end-1 的子字符串。

#### 3、字符串和切片的内存结构

在内存中，一个字符串实际上是一个双字结构，即一个指向实际数据的指针和记录字符串长度的整数（见图 7.4）。因为指针对用户来说是完全不可见，因此我们可以依旧把字符串看做是一个值类型，也就是一个字符数组。

字符串 string s = "hello" 和子字符串 t = s[2:3] 在内存中的结构可以用下图表示：

![image](https://xiaot-static.oss-cn-hangzhou.aliyuncs.com/tools/7.6_fig7.4.png?ynotemdtimestamp=1610262092546)

#### 4、修改字符串中的某个字符

Go 语言中的字符串是不可变的，也就是说 `str[index]` 这样的表达式是不可以被放在等号左侧的。如果尝试运行 `str[i] = 'D'`会得到错误：`cannot assign to str[i]`。

因此，您必须先将字符串转换成字节数组，然后再通过修改数组中的元素值来达到修改字符串的目的，最后将字节数组转换回字符串格式。

例如，将字符串 "hello" 转换为 "cello"：

```
s := "hello"
c := []byte(s)
c[0] = 'c'
s2 := string(c) // s2 == "cello"
```

所以，您可以通过操作切片来完成对字符串的操作。

#### 5、append 函数常见操作

1. 将切片 b 的元素追加到切片 a 之后：`a = append(a, b...)`
2. 复制切片 a 的元素到新的切片 b 上：`b = make([]T, len(a)) copy(b, a)`
3. 删除位于索引 i 的元素：`a = append(a[:i], a[i+1:]...)`
4. 切除切片 a 中从索引 i 至 j 位置的元素：`a = append(a[:i], a[j:]...)`
5. 为切片 a 扩展 j 个元素长度：`a = append(a, make([]T, j)...)`
6. 在索引 i 的位置插入元素 x：`a = append(a[:i], append([]T{x}, a[i:]...)...)`
7. 在索引 i 的位置插入长度为 j 的新切片：`a = append(a[:i], append(make([]T, j), a[i:]...)...)`
8. 在索引 i 的位置插入切片 b 的所有元素：`a = append(a[:i], append(b, a[i:]...)...)`
9. 取出位于切片 a 最末尾的元素 x：`x, a = a[len(a)-1], a[:len(a)-1]`
10. 将元素 x 追加到切片 a：`a = append(a, x)`

### 练习题

### 补充说明

### 课程链接